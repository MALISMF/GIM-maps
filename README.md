# GIM-maps: Веб-интерфейс для прогноза GIM-карт

## Описание

GIM-maps — это одностраничное веб-приложение для визуализации и анализа прогнозов карт полного электронного содержания ионосферы (ПЭС). Система предназначена для исследователей и специалистов, работающих с ионосферными данными, и обеспечивает удобный доступ к прогнозам, метрикам качества моделей и скачиванию архивов данных.

## Основные возможности

- Выбор модели машинного обучения для прогноза ПЭС
- Календарь с отображением доступных дат прогнозов
- Просмотр GIM-карт с поддержкой временных сдвигов
- Скачивание архивов прогнозов в формате .npz
- Визуализация метрик качества моделей (RMSE, MAE, MAPE)
- Адаптивный интерфейс для различных устройств
- Контейнеризация с помощью Docker и раздача через Nginx

## Структура проекта

```
GIM-maps-nogimcard/
├── src/
│   ├── components/
│   │   ├── ModelList.vue          # Выбор моделей
│   │   ├── ForecastCalendar.vue   # Календарь прогнозов
│   │   ├── ImageViewer.vue        # Просмотр GIM-карт
│   │   ├── DownloadNPZ.vue        # Скачивание архивов
│   │   └── Metrics.vue            # Графики метрик
│   ├── App.vue                    # Главный компонент
│   ├── main.js                    # Точка входа
│   └── style.css                  # Глобальные стили
├── public/                        # Статические файлы
├── Dockerfile                     # Docker-контейнер
├── docker-compose.yml             # Docker Compose
├── nginx.conf                     # Конфигурация Nginx
├── package.json                   # Зависимости
├── vite.config.js                 # Конфигурация Vite
└── README.md                      # Документация
```

## Технологии

- **Vue.js 3** — фреймворк для построения интерфейса
- **Vite** — инструмент для сборки и разработки
- **JavaScript (ES6+)** — язык программирования
- **Chart.js** — визуализация метрик
- **axios** — HTTP-запросы к API
- **Docker** — контейнеризация приложения
- **Nginx** — веб-сервер для раздачи статики
- **HTML5, CSS3** — разметка и стилизация

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone https://github.com/MALISMF/GIM-maps.git
cd GIM-maps-nogimcard
```

### 2. Установка зависимостей

```bash
npm install
```

### 3. Запуск в режиме разработки

```bash
npm run dev
```

Приложение будет доступно по адресу http://localhost:5173

### 4. Сборка для продакшена

```bash
npm run build
```

### 5. Запуск с помощью Docker

```bash
docker build -t gim-maps-app .
docker run -p 80:80 gim-maps-app
```

Или с помощью docker-compose:

```bash
docker-compose up --build
```

## Использование

1. Выберите модель из выпадающего списка.
2. В календаре выберите дату с доступным прогнозом.
3. Просматривайте GIM-карты, переключая временные сдвиги.
4. Скачивайте архивы прогнозов с помощью соответствующей кнопки.
5. Анализируйте метрики качества моделей на графиках.

## API эндпоинты

- `/models` — список моделей
- `/get_forecasts/{model_code}` — прогнозы по модели
- `/get_forecast_size/{forecast_id}` — размер пачки прогнозов
- `/get_forecast_image/{forecast_id}?shift={shift}` — изображение прогноза
- `/get_forecast_object/{forecast_id}` — скачивание архива
- `/get_metrics/{model_code}` — метрики качества



## Подключение проекта в виде библиотеки

Если хотим собрать проект в виде библиотеки и подключить к другому проекту нужно выполнить следующие действия.

### 1. Устанавливаем зависимости

```bash
npm install
```

### 2. Собираем проект в виде библиотеки

```bash
npm run build:library
```

После этого в проекте появится папка
`gim-tec-library` с нужными `*.js` и `*.css`-файлами.

### 3. Подключаем к другому проекту

#### 3.1 Копируем папку gim-tec-library
Эту папку нужно скопировать в проект, к которому хотим подключить интефейс прогноза GIM-карт.
Преполагается, что главный Vue компонент прогноза (`App.vue`) будет внедрен в один из `<div>` - блоков хостового проекта. 

#### 3.2 Внедряем интерфейс 

Для этого в хостовом проекте выполняем следующие манипуляции:
в компоненте, в который хотим встроить интерфейс прогноза, в секцию `<script>` импортируем нужные файлы.

```javascript
<script>
import App from '../../gim-tec-library/gim-tec.es.js'
import '../../gim-tec-library/App.css'
import '../../gim-tec-library/style.css'

...

</script>
```

Путь до `gim-tec-library` может быть другой, это зависит от того, куда вы скопировали эту папку.

В секцию `<template>`в место, куда хотим встроить интерфейс, добавляем:

```html
<div>
    <App/>
</div>
```

### 4. Настраиваем конфигурацию прокси-сервера

Чтобы программа корректно работала с API, обязательно добавьте секцию `server` в конфигурацию `vite.config.js` (Если вы используете сборщик Vite):

```javascript
export default defineConfig({
  plugins: [vue()],
  server: {
    proxy: {
      '/gim-tec-forecast': {
        target: 'https://services.simurg.space',
        changeOrigin: true,
        secure: false,
      },
    },
  },
  ...
})
```

### 5. Можно запускать (например в режиме отладки):

```
npm run dev
```

## Ссылка на репозиторий

[https://github.com/MALISMF/GIM-maps](https://github.com/MALISMF/GIM-maps)

